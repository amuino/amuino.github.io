---
layout: post
title: Cómo cargar registros en Mysql de forma eficiente
date: '2009-12-10 18:32:26 +0100'
mt_id: 6
categories:
- trucos_y_pistas
---
Después de haber intentado cargar la información de <a href="http://geonames.org/">geonames</a> (<a href="http://download.geonames.org/export/dump/">distribuida</a> en ficheros de texto delimitados... tipo <a href="http://es.wikipedia.org/wiki/CSV">CSV</a>) en la base de datos de <a href="http://triptance.com">triptance.com</a> al <i>estilo programador</i>&nbsp;(leer cada lí­nea del fichero de datos, mapearlo e insertarlo) y ver que tardaba casi dos horas cada prueba, me he pasado al <i><b>estilo DBA</b></i><b>: usar las herramientas de Mysql</b>.<div><br /></div><div><a href="http://www.modwest.com/help/kb6-253.html">Este artí­culo</a> tiene la información necesaria (en inglés).&nbsp;</div><div><br /></div><div>En mi caso, los registros están separados por tabuladores en lugar de comas (y, obviamente, los campos de mi tabla son distintos).</div><div><br /></div><div>Lo primero es entrar en el cliente de lí­nea de comandos de mysql:</div><div><br /></div><blockquote class="webkit-indent-blockquote code" style="margin: 0 0 0 40px; border: none; padding: 0px;">mysql -u root triptance_dev</blockquote><div><br /></div><div>Lo siguiente, ejecutar el comando de carga:</div><div><br /></div><blockquote class="webkit-indent-blockquote code" style="margin: 0 0 0 40px; border: none; padding: 0px;">LOAD DATA LOCAL INFILE 'tmp/allCountries.txt'&nbsp;<br />INTO TABLE geonames_raw<br />FIELDS TERMINATED BY '\t'<br />LINES TERMINATED BY '\n'<br />(geoname_id, name, ascii_name, alternate_names, lat, lng, feature_class, feature_code, country_code, cc2, admin1_code, admin2_code, admin3_code, admin4_code, population, elevation, gtopo30, timezone_id, modification_date)</blockquote><div><br /></div><div>Y, para terminar, disfrutar del resultado:</div><div><br /></div><blockquote class="webkit-indent-blockquote code" style="margin: 0 0 0 40px; border: none; padding: 0px;">Query OK, 6914645 rows affected, 65535 warnings (4 min 12.55 sec)</blockquote><div><br /></div><div>... hasta sobra tiempo para escribir un post sobre el tema.</div><div><br /></div>
